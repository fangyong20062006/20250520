<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Python API å®éªŒæŒ‡å—</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" rel="stylesheet">
  
  <!-- Tailwindé…ç½® -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#165DFF',
            secondary: '#0A2463',
            accent: '#3E92CC',
            neutral: '#F5F7FA',
            dark: '#1E293B',
            success: '#22C55E',
            warning: '#F59E0B',
            danger: '#EF4444',
            info: '#06B6D4'
          },
          fontFamily: {
            inter: ['Inter', 'system-ui', 'sans-serif'],
          },
        },
      }
    }
  </script>
  
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .text-shadow {
        text-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      .card-hover {
        transition: all 0.3s ease;
      }
      .card-hover:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
      }
      .animate-fade-in {
        animation: fadeIn 0.5s ease-in-out;
      }
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
      }
      .step-number {
        @apply inline-flex items-center justify-center w-8 h-8 rounded-full text-white font-bold text-sm mr-3;
      }
      .code-block {
        @apply bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto text-sm font-mono;
      }
      .nav-link {
        @apply text-gray-700 hover:text-primary font-medium transition-colors duration-200;
      }
      .lab-card {
        @apply bg-white rounded-xl shadow-lg overflow-hidden card-hover mb-8;
      }
      .lab-header {
        @apply p-6 border-l-4 flex items-center;
      }
      .lab-title {
        @apply text-xl font-bold text-gray-900 flex items-center;
      }
    }
  </style>
</head>
<body class="font-inter bg-gray-50 text-gray-800">
  <!-- å¯¼èˆªæ  -->
  <header class="bg-white shadow-md sticky top-0 z-50 transition-all duration-300" id="navbar">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center h-16">
        <div class="flex items-center">
          <i class="fa-solid fa-database text-primary text-2xl mr-3"></i>
          <span class="text-xl font-bold text-primary">Python API å®éªŒæŒ‡å—</span>
        </div>
        
        <nav class="hidden md:flex space-x-8">
          <a href="#lab1" class="nav-link">å®éªŒä¸€</a>
          <a href="#lab2" class="nav-link">å®éªŒäºŒ</a>
          <a href="#lab3" class="nav-link">å®éªŒä¸‰</a>
          <a href="#lab4" class="nav-link">å®éªŒå››</a>
          <a href="#lab5" class="nav-link">å®éªŒäº”</a>
          <a href="#lab6" class="nav-link">å®éªŒå…­</a>
          <a href="#lab7" class="nav-link">å®éªŒä¸ƒ</a>
          <a href="#lab8" class="nav-link">å®éªŒå…«</a>
          <a href="#lab9" class="nav-link">å®éªŒä¹</a>
        </nav>
        
        <div class="md:hidden">
          <button type="button" id="mobile-menu-button" class="text-gray-700 hover:text-primary focus:outline-none">
            <i class="fa-solid fa-bars text-xl"></i>
          </button>
        </div>
      </div>
    </div>
    
    <!-- ç§»åŠ¨ç«¯èœå• -->
    <div id="mobile-menu" class="hidden md:hidden bg-white border-t">
      <div class="px-4 py-3 space-y-2">
        <a href="#lab1" class="block nav-link">å®éªŒä¸€</a>
        <a href="#lab2" class="block nav-link">å®éªŒäºŒ</a>
        <a href="#lab3" class="block nav-link">å®éªŒä¸‰</a>
        <a href="#lab4" class="block nav-link">å®éªŒå››</a>
        <a href="#lab5" class="block nav-link">å®éªŒäº”</a>
        <a href="#lab6" class="block nav-link">å®éªŒå…­</a>
        <a href="#lab7" class="block nav-link">å®éªŒä¸ƒ</a>
        <a href="#lab8" class="block nav-link">å®éªŒå…«</a>
        <a href="#lab9" class="block nav-link">å®éªŒä¹</a>
      </div>
    </div>
  </header>

  <!-- è‹±é›„åŒº -->
  <section class="bg-gradient-to-r from-primary to-accent text-white py-16 md:py-24">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="max-w-4xl mx-auto text-center">
        <h1 class="text-[clamp(2rem,5vw,3.5rem)] font-bold mb-6 leading-tight text-shadow animate-fade-in">
          Python API å®éªŒæŒ‡å—
        </h1>
        <p class="text-[clamp(1rem,2vw,1.25rem)] mb-8 opacity-90 animate-fade-in" style="animation-delay: 0.2s">
          é€šè¿‡å®è·µæŒæ¡ä½¿ç”¨ Python è®¿é—®ç¬¬ä¸‰æ–¹ APIã€æ„å»ºæ¥å£æœåŠ¡ã€é›†æˆæ•°æ®åº“ä»¥åŠå®¹å™¨åŒ–éƒ¨ç½²çš„å®Œæ•´æµç¨‹
        </p>
        <div class="flex flex-col sm:flex-row justify-center gap-4 animate-fade-in" style="animation-delay: 0.4s">
          <a href="#lab1" class="bg-white text-primary px-6 py-3 rounded-lg font-medium shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1">
            å¼€å§‹å®éªŒ <i class="fa-solid fa-arrow-right ml-2"></i>
          </a>
          <a href="#environment" class="bg-white/20 backdrop-blur-sm text-white px-6 py-3 rounded-lg font-medium shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1">
            å®éªŒç¯å¢ƒ <i class="fa-solid fa-flask ml-2"></i>
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- å®éªŒç¯å¢ƒ -->
  <section id="environment" class="container mx-auto px-4 sm:px-6 lg:px-8 py-12 mb-12 scroll-mt-20">
    <div class="lab-card">
      <div class="lab-header bg-info/10 border-info">
        <div class="w-12 h-12 rounded-full bg-info flex items-center justify-center text-white mr-4">
          <i class="fa-solid fa-laptop-code text-xl"></i>
        </div>
        <div>
          <h2 class="text-2xl font-bold text-gray-900">ğŸ› ï¸ å®éªŒç¯å¢ƒå»ºè®®</h2>
        </div>
      </div>
      
      <div class="p-6">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div class="bg-gray-50 p-5 rounded-lg border border-gray-200">
            <h3 class="font-semibold text-lg mb-3 flex items-center">
              <i class="fa-brands fa-ubuntu text-info mr-2"></i> Ubuntu è™šæ‹Ÿæœº
            </h3>
            <p class="text-gray-600">æ¨èä½¿ç”¨æœ€æ–° LTS ç‰ˆæœ¬ï¼Œé¢„è£… Docker ç¯å¢ƒ</p>
          </div>
          
          <div class="bg-gray-50 p-5 rounded-lg border border-gray-200">
            <h3 class="font-semibold text-lg mb-3 flex items-center">
              <i class="fa-solid fa-database text-info mr-2"></i> PostgreSQL
            </h3>
            <p class="text-gray-600">å…³ç³»å‹æ•°æ®åº“ï¼Œç”¨äºå­˜å‚¨å®éªŒæ•°æ®</p>
          </div>
          
          <div class="bg-gray-50 p-5 rounded-lg border border-gray-200">
            <h3 class="font-semibold text-lg mb-3 flex items-center">
              <i class="fa-solid fa-code text-info mr-2"></i> å¼€å‘å·¥å…·
            </h3>
            <p class="text-gray-600">Python 3.10+ã€pgAdminã€Postman æˆ–ç±»ä¼¼å·¥å…·</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- å®éªŒåˆ—è¡¨ -->
  <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <!-- å®éªŒä¸€ -->
    <section id="lab1" class="mb-20 scroll-mt-20">
      <div class="lab-card">
        <div class="lab-header bg-primary/10 border-primary">
          <div class="w-12 h-12 rounded-full bg-primary flex items-center justify-center text-white mr-4">
            <i class="fa-solid fa-microscope text-xl"></i>
          </div>
          <div>
            <h2 class="text-2xl font-bold text-gray-900">ğŸ§ª å®éªŒä¸€ï¼šä½¿ç”¨ `requests` è®¿é—®ç¬¬ä¸‰æ–¹ API å¹¶å¤„ç†æ•°æ®</h2>
          </div>
        </div>
        
        <div class="p-6">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div>
              <h3 class="text-xl font-semibold mb-4 flex items-center">
                <i class="fa-solid fa-target text-primary mr-2"></i> å®éªŒç›®æ ‡
              </h3>
              <ul class="space-y-2">
                <li class="flex items-start">
                  <i class="fa-solid fa-check-circle text-green-500 mt-1 mr-2"></i>
                  <span>æŒæ¡ Python `requests` çš„åŸºæœ¬ç”¨æ³•</span>
                </li>
                <li class="flex items-start">
                  <i class="fa-solid fa-check-circle text-green-500 mt-1 mr-2"></i>
                  <span>èƒ½å¤Ÿä» API ä¸­è·å–æ•°æ®å¹¶è§£æè¿”å›ç»“æœ</span>
                </li>
                <li class="flex items-start">
                  <i class="fa-solid fa-check-circle text-green-500 mt-1 mr-2"></i>
                  <span>äº†è§£ç¬¬ä¸‰æ–¹ API å¯†é’¥çš„ç”³è¯·ä¸ä½¿ç”¨æµç¨‹</span>
                </li>
              </ul>
            </div>
            
            <div>
              <h3 class="text-xl font-semibold mb-4 flex items-center">
                <i class="fa-solid fa-list-ol text-primary mr-2"></i> å®éªŒæ­¥éª¤
              </h3>
              <div class="space-y-4">
                <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-accent">
                  <h4 class="font-medium flex items-center">
                    <span class="bg-accent text-white rounded-full w-6 h-6 flex items-center justify-center mr-2">1</span>
                    å®‰è£… requests åº“
                  </h4>
                  <p class="text-gray-600 mt-2">åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… requests åº“ï¼š</p>
                  <pre class="code-block">pip install requests</pre>
                </div>
                
                <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-accent">
                  <h4 class="font-medium flex items-center">
                    <span class="bg-accent text-white rounded-full w-6 h-6 flex items-center justify-center mr-2">2</span>
                    è·å– WeatherAPI å¯†é’¥
                  </h4>
                  <p class="text-gray-600 mt-2">è®¿é—® <a href="https://www.weatherapi.com/" target="_blank" class="text-primary hover:underline">WeatherAPI å®˜ç½‘</a> æ³¨å†Œå…è´¹è´¦å·ï¼Œè·å–æ¯æ—¥ 1000 æ¬¡è°ƒç”¨çš„ API å¯†é’¥ã€‚</p>
                  <p class="text-gray-600 mt-2">æ³¨æ„ï¼šç”Ÿäº§ç¯å¢ƒéœ€æ ¹æ®éœ€æ±‚å‡çº§å¥—é¤ã€‚</p>
                </div>
                
                <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-accent">
                  <h4 class="font-medium flex items-center">
                    <span class="bg-accent text-white rounded-full w-6 h-6 flex items-center justify-center mr-2">3</span>
                    ç¼–å†™ Python è„šæœ¬ï¼ˆweather_demo.pyï¼‰
                  </h4>
                  <p class="text-gray-600 mt-2">åˆ›å»ºä¸€ä¸ªåä¸º weather_demo.py çš„ Python è„šæœ¬ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
                  <pre class="code-block">import requests

url = "https://api.weatherapi.com/v1/current.json"
params = {
    "key": "your_actual_api_key",  # æ›¿æ¢ä¸ºæ§åˆ¶å°è·å–çš„å¯†é’¥
    "q": "Guangzhou",
    "aqi": "no"  # å¯é€‰å‚æ•°ï¼šå…³é—­ç©ºæ°”è´¨é‡æ•°æ®ä»¥å‡å°‘å“åº”ä½“ç§¯
}

response = requests.get(url, params=params)
response.raise_for_status()  # è‡ªåŠ¨æŠ›å‡º HTTP é”™è¯¯
data = response.json()

print(f"åŸå¸‚ï¼š{data['location']['name']}")
print(f"æ¸©åº¦ï¼š{data['current']['temp_c']} Â°C")
print(f"å¤©æ°”çŠ¶å†µï¼š{data['current']['condition']['text']}")</pre>
                </div>
              </div>
            </div>
          </div>
          
          <div class="mt-8 flex justify-between items-center">
            <div class="text-sm text-gray-500">
              <i class="fa-solid fa-clock text-primary mr-1"></i> é¢„è®¡å®Œæˆæ—¶é—´: 15 åˆ†é’Ÿ
            </div>
            <div class="flex space-x-2">
              <span class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs">APIåŸºç¡€</span>
              <span class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs">æ•°æ®å¤„ç†</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- å®éªŒäºŒ -->
    <section id="lab2" class="mb-20 scroll-mt-20">
      <div class="lab-card">
        <div class="lab-header bg-primary/10 border-primary">
          <div class="w-12 h-12 rounded-full bg-primary flex items-center justify-center text-white mr-4">
            <i class="fa-solid fa-server text-xl"></i>
          </div>
          <div>
            <h2 class="text-2xl font-bold text-gray-900">ğŸ§ª å®éªŒäºŒï¼šæ„å»º Flask æ¥å£æœåŠ¡ä¾›æ™ºèƒ½ä½“å¹³å°è°ƒç”¨</h2>
          </div>
        </div>
        
        <div class="p-6">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div>
              <h3 class="text-xl font-semibold mb-4 flex items-center">
                <i class="fa-solid fa-target text-primary mr-2"></i> å®éªŒç›®æ ‡
              </h3>
              <ul class="space-y-2">
                <li class="flex items-start">
                  <i class="fa-solid fa-check-circle text-green-500 mt-1 mr-2"></i>
                  <span>ä½¿ç”¨ Flask åˆ›å»ºåŸºæœ¬ Web æ¥å£</span>
                </li>
                <li class="flex items-start">
                  <i class="fa-solid fa-check-circle text-green-500 mt-1 mr-2"></i>
                  <span>æ¥æ”¶å‚æ•°å¹¶è¿”å› JSON å“åº”</span>
                </li>
              </ul>
            </div>
            
            <div>
              <h3 class="text-xl font-semibold mb-4 flex items-center">
                <i class="fa-solid fa-list-ol text-primary mr-2"></i> å®éªŒæ­¥éª¤
              </h3>
              <div class="space-y-4">
                <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-accent">
                  <h4 class="font-medium flex items-center">
                    <span class="bg-accent text-white rounded-full w-6 h-6 flex items-center justify-center mr-2">1</span>
                    å®‰è£… Flask
                  </h4>
                  <p class="text-gray-600 mt-2">åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… Flaskï¼š</p>
                  <pre class="code-block">pip install flask</pre>
                </div>
                
                <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-accent">
                  <h4 class="font-medium flex items-center">
                    <span class="bg-accent text-white rounded-full w-6 h-6 flex items-center justify-center mr-2">2</span>
                    ç¼–å†™ API æœåŠ¡ï¼ˆapp.pyï¼‰
                  </h4>
                  <p class="text-gray-600 mt-2">åˆ›å»ºä¸€ä¸ªåä¸º app.py çš„ Python è„šæœ¬ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
                  <pre class="code-block">from flask import Flask, request, jsonify

app = Flask(__name__)

@app.route('/echo', methods=['POST'])
def echo():
    content = request.json
    return jsonify({"received": content})

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000)</pre>
                </div>
                
                <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-accent">
                  <h4 class="font-medium flex items-center">
                    <span class="bg-accent text-white rounded-full w-6 h-6 flex items-center justify-center mr-2">3</span>
                    å¯åŠ¨æœåŠ¡å¹¶ç”¨ Postman æˆ– curl æµ‹è¯•
                  </h4>
                  <p class="text-gray-600 mt-2">åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œè„šæœ¬ï¼Œå¯åŠ¨æœåŠ¡ï¼š</p>
                  <pre class="code-block">python app.py</pre>
                  <p class="text-gray-600 mt-2">ä½¿ç”¨ Postman æˆ– curl å‘é€ POST è¯·æ±‚æµ‹è¯•æ¥å£ï¼š</p>
                  <pre class="code-block">curl -X POST -H "Content-Type: application/json" -d '{"message": "Hello, Flask!"}' http://localhost:5000/echo</pre>
                </div>
              </div>
            </div>
          </div>
          
          <div class="mt-8 flex justify-between items-center">
            <div class="text-sm text-gray-500">
              <i class="fa-solid fa-clock text-primary mr-1"></i> é¢„è®¡å®Œæˆæ—¶é—´: 20 åˆ†é’Ÿ
            </div>
            <div class="flex space-x-2">
              <span class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs">WebæœåŠ¡</span>
              <span class="px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-xs">Flask</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- å®éªŒä¸‰ -->
    <section id="lab3" class="mb-20 scroll-mt-20">
      <div class="lab-card">
        <div class="lab-header bg-primary/10 border-primary">
          <div class="w-12 h-12 rounded-full bg-primary flex items-center justify-center text-white mr-4">
            <i class="fa-solid fa-database text-xl"></i>
          </div>
          <div>
            <h2 class="text-2xl font-bold text-gray-900">ğŸ§ª å®éªŒä¸‰ï¼šé›†æˆ Flask + SQLAlchemy + PostgreSQL å®ç°æ•°æ®åº“å†™å…¥</h2>
          </div>
        </div>
        
        <div class="p-6">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div>
              <h3 class="text-xl font-semibold mb-4 flex items-center">
                <i class="fa-solid fa-target text-primary mr-2"></i> å®éªŒç›®æ ‡
              </h3>
              <ul class="space-y-2">
                <li class="flex items-start">
                  <i class="fa-solid fa-check-circle text-green-500 mt-1 mr-2"></i>
                  <span>åˆ›å»ºæ•°æ®åº“æ¨¡å‹</span>
                </li>
                <li class="flex items-start">
                  <i class="fa-solid fa-check-circle text-green-500 mt-1 mr-2"></i>
                  <span>å†™å…¥å’ŒæŸ¥è¯¢ PostgreSQL æ•°æ®</span>
                </li>
                <li class="flex items-start">
                  <i class="fa-solid fa-check-circle text-green-500 mt-1 mr-2"></i>
                  <span>å®è·µæ•°æ®åº“å®‰å…¨æœ€ä½³å®è·µ</span>
                </li>
              </ul>
            </div>
            
            <div>
              <h3 class="text-xl font-semibold mb-4 flex items-center">
                <i class="fa-solid fa-list-ol text-primary mr-2"></i> å®éªŒæ­¥éª¤
              </h3>
              <div class="space-y-4">
                <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-accent">
                  <h4 class="font-medium flex items-center">
                    <span class="bg-accent text-white rounded-full w-6 h-6 flex items-center justify-center mr-2">1</span>
                    å®‰è£…ä¾èµ–
                  </h4>
                  <p class="text-gray-600 mt-2">åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…æ‰€éœ€ä¾èµ–ï¼š</p>
                  <pre class="code-block">pip install flask flask_sqlalchemy psycopg2-binary</pre>
                </div>
                
                <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-accent">
                  <h4 class="font-medium flex items-center">
                    <span class="bg-accent text-white rounded-full w-6 h-6 flex items-center justify-center mr-2">2</span>
                    åˆ›å»º PostgreSQL ä¸“ç”¨ç”¨æˆ·
                  </h4>
                  <p class="text-gray-600 mt-2">ä½¿ç”¨ä»¥ä¸‹ SQL å‘½ä»¤åˆ›å»ºä¸“ç”¨ç”¨æˆ·å’Œæ•°æ®åº“ï¼š</p>
                  <pre class="code-block">CREATE USER flask_app WITH LOGIN PASSWORD 'strong_password';
CREATE DATABASE testdb OWNER flask_app;
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO flask_app;</pre>
                </div>
                
                <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-accent">
                  <h4 class="font-medium flex items-center">
                    <span class="bg-accent text-white rounded-full w-6 h-6 flex items-center justify-center mr-2">3</span>
                    æ•°æ®åº“é…ç½®ç¤ºä¾‹ï¼ˆapp.pyï¼‰
                  </h4>
                  <p class="text-gray-600 mt-2">åˆ›å»ºä¸€ä¸ªåä¸º app.py çš„ Python è„šæœ¬ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
                  <pre class="code-block">from flask import Flask, jsonify
from flask_sqlalchemy import SQLAlchemy
import os
from datetime import timedelta

app = Flask(__name__)
app.config['SQLALCHEMY_DATABASE_URI'] = f"postgresql://{os.getenv('FLASK_DB_USER', 'flask_app')}:{os.getenv('FLASK_DB_PASSWORD', 'strong_password')}@localhost:5432/{os.getenv('FLASK_DB_NAME', 'testdb')}"
app.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = False
db = SQLAlchemy(app)

class User(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(50), nullable=False)
    created_at = db.Column(db.DateTime, default=db.func.current_timestamp())

@app.route('/add_user/<name>')
def add_user(name):
    try:
        user = User(name=name)
        db.session.add(user)
        db.session.commit()
        return jsonify({'status': 'ok', 'user_id': user.id, 'created_at': user.created_at.isoformat()}), 201
    except Exception as e:
        db.session.rollback()
        return jsonify({'error': f'æ•°æ®åº“æ“ä½œå¤±è´¥ï¼š{str(e)}'}), 500

if __name__ == '__main__':
    with app.app_context():
        try:
            db.create_all()
            print("æ•°æ®åº“åˆå§‹åŒ–å®Œæˆ")
        except Exception as e:
            print(f'åˆå§‹åŒ–æ•°æ®åº“å¤±è´¥ï¼š{str(e)}')
    app.run(host='0.0.0.0', port=5000)</pre>
                </div>
                
                <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-accent">
                  <h4 class="font-medium flex items-center">
                    <span class="bg-accent text-white rounded-full w-6 h-6 flex items-center justify-center mr-2">4</span>
                    ä½¿ç”¨ pgAdmin æŸ¥çœ‹å†™å…¥è®°å½•
                  </h4>
                  <p class="text-gray-600 mt-2">è®¿é—® <a href="http://localhost:5050" target="_blank" class="text-primary hover:underline">pgAdmin</a>ï¼Œè¿æ¥åˆ° PostgreSQL æ•°æ®åº“ï¼ŒæŸ¥çœ‹å†™å…¥çš„ç”¨æˆ·è®°å½•ã€‚</p>
                </div>
              </div>
            </div>
          </div>
          
          <div class="mt-8 flex justify-between items-center">
            <div class="text-sm text-gray-500">
              <i class="fa-solid fa-clock text-primary mr-1"></i> é¢„è®¡å®Œæˆæ—¶é—´: 30 åˆ†é’Ÿ
            </div>
            <div class="flex space-x-2">
              <span class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs">æ•°æ®åº“</span>
              <span class="px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-xs">SQLAlchemy</span>
              <span class="px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs">PostgreSQL</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- å®éªŒå›› -->
    <section id="lab4" class="mb-20 scroll-mt-20">
      <div class="lab-card">
        <div class="lab-header bg-primary/10 border-primary">
          <div class="w-12 h-12 rounded-full bg-primary flex items-center justify-center text-white mr-4">
            <i class="fa-brands fa-docker text-xl"></i>
          </div>
          <div>
            <h2 class="text-2xl font-bold text-gray-900">ğŸ§ª å®éªŒå››ï¼šä½¿ç”¨ Docker å®¹å™¨è¿è¡Œ Flask åº”ç”¨</h2>
          </div>
        </div>
        
        <div class="p-6">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div>
              <h3 class="text-xl font-semibold mb-4 flex items-center">
                <i class="fa-solid fa-target text-primary mr-2"></i> å®éªŒç›®æ ‡
              </h3>
              <ul class="space-y-2">
                <li class="flex items-start">
                  <i class="fa-solid fa-check-circle text-green-500 mt-1 mr-2"></i>
                  <span>ç¼–å†™ Dockerfile æ„å»º Flask å®¹å™¨</span>
                </li>
                <li class="flex items-start">
                  <i class="fa-solid fa-check-circle text-green-500 mt-1 mr-2"></i>
                  <span>è¿è¡Œå¹¶éªŒè¯æœåŠ¡</span>
                </li>
                <li class="flex items-start">
                  <i class="fa-solid fa-check-circle text-green-500 mt-1 mr-2"></i>
                  <span>å®è·µé•œåƒä¼˜åŒ–ä¸å®‰å…¨åŠ å›º</span>
                </li>
              </ul>
            </div>
            
            <div>
              <h3 class="text-xl font-semibold mb-4 flex items-center">
                <i class="fa-solid fa-list-ol text-primary mr-2"></i> å®éªŒæ­¥éª¤
              </h3>
              <div class="space-y-4">
                <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-accent">
                  <h4 class="font-medium flex items-center">
                    <span class="bg-accent text-white rounded-full w-6 h-6 flex items-center justify-center mr-2">1</span>
                    åˆ›å»º requirements.txt
                  </h4>
                  <p class="text-gray-600 mt-2">åˆ›å»ºä¸€ä¸ªåä¸º requirements.txt çš„æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
                  <pre class="code-block">flask==2.3.3
psycopg2-binary==2.9.7  # è‹¥ä½¿ç”¨å®éªŒä¸‰éœ€æ·»åŠ </pre>
                </div>
                
                <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-accent">
                  <h4 class="font-medium flex items-center">
                    <span class="bg-accent text-white rounded-full w-6 h-6 flex items-center justify-center mr-2">2</span>
                    Dockerfile ç¤ºä¾‹ï¼ˆå®‰å…¨åŠ å›ºç‰ˆï¼‰
                  </h4>
                  <p class="text-gray-600 mt-2">åˆ›å»ºä¸€ä¸ªåä¸º Dockerfile çš„æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
                  <pre class="code-block">FROM python:3.10-slim
WORKDIR /app

# åˆ›å»ºé root ç”¨æˆ·
RUN groupadd -S app && useradd -S app -G app
RUN chown -R app:app /app
USER app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt
COPY . .

CMD ["python", "app.py"]</pre>
                </div>
                
                <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-accent">
                  <h4 class="font-medium flex items-center">
                    <span class="bg-accent text-white rounded-full w-6 h-6 flex items-center justify-center mr-2">3</span>
                    æ„å»ºä¸è¿è¡Œ
                  </h4>
                  <p class="text-gray-600 mt-2">åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ„å»ºå¹¶è¿è¡Œ Docker å®¹å™¨ï¼š</p>
                  <pre class="code-block">docker build -t flask-demo .
docker run -p 5000:5000 --user app flask-demo</pre>
                </div>
              </div>
            </div>
          </div>
          
          <div class="mt-8 flex justify-between items-center">
            <div class="text-sm text-gray-500">
              <i class="fa-solid fa-clock text-primary mr-1"></i> é¢„è®¡å®Œæˆæ—¶é—´: 25 åˆ†é’Ÿ
            </div>
            <div class="flex space-x-2">
              <span class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs">å®¹å™¨åŒ–</span>
              <span class="px-3 py-1 bg-red-100 text-red-800 rounded-full text-xs">Docker</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- å®éªŒäº” -->
    <section id="lab5" class="mb-20 scroll-mt-20">
      <div class="lab-card">
        <div class="lab-header bg-primary/10 border-primary">
          <div class="w-12 h-12 rounded-full bg-primary flex items-center justify-center text-white mr-4">
            <i class="fa-solid fa-sitemap text-xl"></i>
          </div>
          <div>
            <h2 class="text-2xl font-bold text-gray-900">ğŸ§ª å®éªŒäº”ï¼šä½¿ç”¨ docker-compose ä¸€é”®éƒ¨ç½² Flask + PostgreSQL + pgAdmin</h2>
          </div>
        </div>
        
        <div class="p-6">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div>
              <h3 class="text-xl font-semibold mb-4 flex items-center">
                <i class="fa-solid fa-target text-primary mr-2"></i> å®éªŒç›®æ ‡
              </h3>
              <ul class="space-y-2">
                <li class="flex items-start">
                  <i class="fa-solid fa-check-circle text-green-500 mt-1 mr-2"></i>
                  <span>æŒæ¡ `docker-compose` å¤šæœåŠ¡ç¼–æ’èƒ½åŠ›</span>
                </li>
                <li class="flex items-start">
                  <i class="fa-solid fa-check-circle text-green-500 mt-1 mr-2"></i>
                  <span>å®ç°æœåŠ¡é—´ä¾èµ–ç®¡ç†ä¸å¥åº·æ£€æŸ¥</span>
                </li>
                <li class="flex items-start">
                  <i class="fa-solid fa-check-circle text-green-500 mt-1 mr-2"></i>
                  <span>å¿«é€Ÿå¯åŠ¨åŒ…å«æ•°æ®åº“å’Œç®¡ç†å·¥å…·çš„å®Œæ•´å¼€å‘ç¯å¢ƒ</span>
                </li>
              </ul>
            </div>
            
            <div>
              <h3 class="text-xl font-semibold mb-4 flex items-center">
                <i class="fa-solid fa-list-ol text-primary mr-2"></i> å®éªŒæ­¥éª¤
              </h3>
              <div class="space-y-4">
                <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-accent">
                  <h4 class="font-medium flex items-center">
                    <span class="bg-accent text-white rounded-full w-6 h-6 flex items-center justify-center mr-2">1</span>
                    ç¼–å†™ docker-compose.yml
                  </h4>
                  <p class="text-gray-600 mt-2">åˆ›å»ºä¸€ä¸ªåä¸º docker-compose.yml çš„æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
                  <pre class="code-block">version: '3.9'
services:
  web:
    build: .
    ports:
      - "5000:5000"
    depends_on:
      db:
        condition: service_healthy
    environment:
      - FLASK_ENV=development
      - FLASK_DB_USER=flask_app
      - FLASK_DB_PASSWORD=strong_password
      - FLASK_DB_NAME=testdb
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"

  db:
    image: postgres:13-alpine
    environment:
      POSTGRES_USER: flask_app
      POSTGRES_PASSWORD: strong_password
      POSTGRES_DB: testdb
    ports:
      - "5432:5432"
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U flask_app -d testdb"]
      interval: 5s
      timeout: 5s
      retries: 5
    volumes:
      - postgres_data:/var/lib/postgresql/data

  pgadmin:
    image: dpage/pgadmin4
    environment:
      PGADMIN_DEFAULT_EMAIL: admin@demo.com
      PGADMIN_DEFAULT_PASSWORD: admin
    ports:
      - "5050:80"
    volumes:
      - pgadmin_data:/var/lib/pgadmin

volumes:
  postgres_data:  # æŒä¹…åŒ–æ•°æ®åº“æ•°æ®
  pgadmin_data:   # æŒä¹…åŒ– pgAdmin é…ç½®</pre>
                </div>
                
                <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-accent">
                  <h4 class="font-medium flex items-center">
                    <span class="bg-accent text-white rounded-full w-6 h-6 flex items-center justify-center mr-2">2</span>
                    æ„å»ºå¹¶è¿è¡Œ
                  </h4>
                  <p class="text-gray-600 mt-2">åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ„å»ºå¹¶è¿è¡ŒæœåŠ¡ï¼š</p>
                  <pre class="code-block">docker-compose up --build</pre>
                </div>
                
                <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-accent">
                  <h4 class="font-medium flex items-center">
                    <span class="bg-accent text-white rounded-full w-6 h-6 flex items-center justify-center mr-2">3</span>
                    æµè§ˆå™¨è®¿é—®
                  </h4>
                  <p class="text-gray-600 mt-2">é€šè¿‡æµè§ˆå™¨è®¿é—®ä»¥ä¸‹åœ°å€éªŒè¯æœåŠ¡ï¼š</p>
                  <ul class="list-disc pl-5 mt-2 space-y-1">
                    <li>Flask æ¥å£ï¼š<a href="http://localhost:5000" target="_blank" class="text-primary hover:underline">http://localhost:5000</a></li>
                    <li>pgAdminï¼š<a href="http://localhost:5050" target="_blank" class="text-primary hover:underline">http://localhost:5050</a></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          
          <div class="mt-8 flex justify-between items-center">
            <div class="text-sm text-gray-500">
              <i class="fa-solid fa-clock text-primary mr-1"></i> é¢„è®¡å®Œæˆæ—¶é—´: 35 åˆ†é’Ÿ
            </div>
            <div class="flex space-x-2">
              <span class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs">ç¼–æ’</span>
              <span class="px-3 py-1 bg-red-100 text-red-800 rounded-full text-xs">Docker</span>
              <span class="px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs">PostgreSQL</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- å®éªŒå…­ -->
    <section id="lab6" class="mb-20 scroll-mt-20">
      <div class="lab-card">
        <div class="lab-header bg-primary/10 border-primary">
          <div class="w-12 h-12 rounded-full bg-primary flex items-center justify-center text-white mr-4">
            <i class="fa-solid fa-share-alt text-xl"></i>
          </div>
          <div>
            <h2 class="text-2xl font-bold text-gray-900">ğŸ§ª å®éªŒå…­ï¼šå¯¼å‡ºä¸å¯¼å…¥ Docker é•œåƒï¼ˆä¾¿äºçº¿ä¸‹ä¼ æ’­ï¼‰</h2>
          </div>
        </div>
        
        <div class="p-6">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div>
              <h3 class="text-xl font-semibold mb-4 flex items-center">
                <i class="fa-solid fa-target text-primary mr-2"></i> å®éªŒç›®æ ‡
              </h3>
              <ul class="space-y-2">
                <li class="flex items-start">
                  <i class="fa-solid fa-check-circle text-green-500 mt-1 mr-2"></i>
                  <span>ç†è§£å¦‚ä½•åœ¨ç¦»çº¿ç¯å¢ƒä¸­å…±äº«é•œåƒ</span>
                </li>
              </ul>
            </div>
            
            <div>
              <h3 class="text-xl font-semibold mb-4 flex items-center">
                <i class="fa-solid fa-list-ol text-primary mr-2"></i> å®éªŒæ­¥éª¤
              </h3>
              <div class="space-y-4">
                <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-accent">
                  <h4 class="font-medium flex items-center">
                    <span class="bg-accent text-white rounded-full w-6 h-6 flex items-center justify-center mr-2">1</span>
                    å¯¼å‡ºé•œåƒï¼ˆåŒ…å«æ ‡ç­¾ï¼‰
                  </h4>
                  <p class="text-gray-600 mt-2">åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯¼å‡º Docker é•œåƒï¼š</p>
                  <pre class="code-block">docker tag flask-demo:latest flask-demo:v1.0
docker save flask-demo:v1.0 > flask-demo-v1.0.tar</pre>
                </div>
                
                <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-accent">
                  <h4 class="font-medium flex items-center">
                    <span class="bg-accent text-white rounded-full w-6 h-6 flex items-center justify-center mr-2">2</span>
                    æ‹·è´è‡³å¦ä¸€è™šæ‹Ÿæœºåå¯¼å…¥
                  </h4>
                  <p class="text-gray-600 mt-2">å°†å¯¼å‡ºçš„ tar æ–‡ä»¶æ‹·è´åˆ°å¦ä¸€å°è™šæ‹Ÿæœºåï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯¼å…¥é•œåƒï¼š</p>
                  <pre class="code-block">docker load < flask-demo-v1.0.tar
docker tag $(docker images -q flask-demo:latest) flask-demo:v1.0</pre>
                </div>
                
                <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-accent">
                  <h4 class="font-medium flex items-center">
                    <span class="bg-accent text-white rounded-full w-6 h-6 flex items-center justify-center mr-2">3</span>
                    è¿è¡ŒæŒ‡å®šç‰ˆæœ¬é•œåƒ
                  </h4>
                  <p class="text-gray-600 mt-2">æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿è¡Œå¯¼å…¥çš„é•œåƒï¼š</p>
                  <pre class="code-block">docker run -p 5000:5000 flask-demo:v1.0</pre>
                </div>
              </div>
            </div>
          </div>
          
          <div class="mt-8 flex justify-between items-center">
            <div class="text-sm text-gray-500">
              <i class="fa-solid fa-clock text-primary mr-1"></i> é¢„è®¡å®Œæˆæ—¶é—´: 15 åˆ†é’Ÿ
            </div>
            <div class="flex space-x-2">
              <span class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs">é•œåƒç®¡ç†</span>
              <span class="px-3 py-1 bg-red-100 text-red-800 rounded-full text-xs">Docker</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- å®éªŒä¸ƒ -->
    <section id="lab7" class="mb-20 scroll-mt-20">
      <div class="lab-card">
        <div class="lab-header bg-primary/10 border-primary">
          <div class="w-12 h-12 rounded-full bg-primary flex items-center justify-center text-white mr-4">
            <i class="fa-solid fa-link text-xl"></i>
          </div>
          <div>
            <h2 class="text-2xl font-bold text-gray-900">ğŸ§ª å®éªŒä¸ƒï¼šæ™ºèƒ½ä½“å¹³å°ä¸ Flask æ¥å£çš„è”åŠ¨æµ‹è¯•</h2>
          </div>
        </div>
        
        <div class="p-6">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div>
              <h3 class="text-xl font-semibold mb-4 flex items-center">
                <i class="fa-solid fa-target text-primary mr-2"></i> å®éªŒç›®æ ‡
              </h3>
              <ul class="space-y-2">
                <li class="flex items-start">
                  <i class="fa-solid fa-check-circle text-green-500 mt-1 mr-2"></i>
                  <span>æ¨¡æ‹Ÿæ™ºèƒ½ä½“è°ƒç”¨è‡ªå»º API çš„å®Œæ•´æµç¨‹</span>
                </li>
                <li class="flex items-start">
                  <i class="fa-solid fa-check-circle text-green-500 mt-1 mr-2"></i>
                  <span>å®ç°è®¤è¯ä¸æƒé™æ§åˆ¶</span>
                </li>
              </ul>
            </div>
            
            <div>
              <h3 class="text-xl font-semibold mb-4 flex items-center">
                <i class="fa-solid fa-list-ol text-primary mr-2"></i> å®éªŒæ­¥éª¤
              </h3>
              <div class="space-y-4">
                <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-accent">
                  <h4 class="font-medium flex items-center">
                    <span class="bg-accent text-white rounded-full w-6 h-6 flex items-center justify-center mr-2">1</span>
                    æ–°å¢æ™ºèƒ½ä½“ä¸“ç”¨æ¥å£ï¼ˆå¸¦æƒé™éªŒè¯ï¼‰
                  </h4>
                  <p class="text-gray-600 mt-2">åœ¨ app.py ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p>
                  <pre class="code-block">from flask_jwt_extended import jwt_required, get_jwt_identity

@app.route('/agent/process', methods=['POST'])
@jwt_required()
def agent_process():
    current_user = get_jwt_identity()
    task = request.json.get('task')
    if task == "get_user_list":
        # é™åˆ¶æ™ºèƒ½ä½“ä»…èƒ½è·å–å‰10æ¡æ•°æ®
        users = User.query.order_by(User.created_at.desc()).limit(10).all()
        return jsonify([{'id': u.id, 'name': u.name, 'created_at': u.created_at.isoformat()} for u in users])
    elif task == "ping":
        return jsonify({'status': 'pong', 'timestamp': datetime.now().isoformat()})
    return jsonify({'error': 'éæ³•ä»»åŠ¡'}), 403</pre>
                </div>
                
                <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-accent">
                  <h4 class="font-medium flex items-center">
                    <span class="bg-accent text-white rounded-full w-6 h-6 flex items-center justify-center mr-2">2</span>
                    åœ¨æ™ºèƒ½ä½“å¹³å°é…ç½® API è°ƒç”¨è§„åˆ™
                  </h4>
                  <p class="text-gray-600 mt-2">åœ¨æ™ºèƒ½ä½“å¹³å°é…ç½®ä»¥ä¸‹ API è°ƒç”¨è§„åˆ™ï¼š</p>
                  <ul class="list-disc pl-5 mt-2 space-y-1">
                    <li>è¯·æ±‚åœ°å€ï¼š<code>http://localhost:5000/agent/process</code></li>
                    <li>è¯·æ±‚å¤´ï¼š<code>Authorization: Bearer &lt;JWT_TOKEN&gt;</code></li>
                    <li>è¯·æ±‚ä½“ï¼š<code>{"task": "get_user_list"}</code></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          
          <div class="mt-8 flex justify-between items-center">
            <div class="text-sm text-gray-500">
              <i class="fa-solid fa-clock text-primary mr-1"></i> é¢„è®¡å®Œæˆæ—¶é—´: 25 åˆ†é’Ÿ
            </div>
            <div class="flex space-x-2">
              <span class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs">é›†æˆæµ‹è¯•</span>
              <span class="px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-xs">æ™ºèƒ½ä½“</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- å®éªŒå…« -->
    <section id="lab8" class="mb-20 scroll-mt-20">
      <div class="lab-card">
        <div class="lab-header bg-primary/10 border-primary">
          <div class="w-12 h-12 rounded-full bg-primary flex items-center justify-center text-white mr-4">
            <i class="fa-solid fa-shield-alt text-xl"></i>
          </div>
          <div>
            <h2 class="text-2xl font-bold text-gray-900">ğŸ§ª å®éªŒå…«ï¼šä½¿ç”¨ JWT å®ç°æ¥å£è®¤è¯ï¼ˆç”Ÿäº§å¢å¼ºç‰ˆï¼‰</h2>
          </div>
        </div>
        
        <div class="p-6">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div>
              <h3 class="text-xl font-semibold mb-4 flex items-center">
                <i class="fa-solid fa-target text-primary mr-2"></i> å®éªŒç›®æ ‡
              </h3>
              <ul class="space-y-2">
                <li class="flex items-start">
                  <i class="fa-solid fa-check-circle text-green-500 mt-1 mr-2"></i>
                  <span>ä¸º Flask æ¥å£æ·»åŠ è®¤è¯æœºåˆ¶</span>
                </li>
                <li class="flex items-start">
                  <i class="fa-solid fa-check-circle text-green-500 mt-1 mr-2"></i>
                  <span>å®ç°ä»¤ç‰Œè¿‡æœŸã€åˆ·æ–°å’Œé»‘åå•åŠŸèƒ½</span>
                </li>
              </ul>
            </div>
            
            <div>
              <h3 class="text-xl font-semibold mb-4 flex items-center">
                <i class="fa-solid fa-list-ol text-primary mr-2"></i> å®éªŒæ­¥éª¤
              </h3>
              <div class="space-y-4">
                <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-accent">
                  <h4 class="font-medium flex items-center">
                    <span class="bg-accent text-white rounded-full w-6 h-6 flex items-center justify-center mr-2">1</span>
                    å®‰è£…ä¾èµ–
                  </h4>
                  <p class="text-gray-600 mt-2">åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…æ‰€éœ€ä¾èµ–ï¼š</p>
                  <pre class="code-block">pip install flask-jwt-extended==4.4.4 python-dotenv</pre>
                </div>
                
                <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-accent">
                  <h4 class="font-medium flex items-center">
                    <span class="bg-accent text-white rounded-full w-6 h-6 flex items-center justify-center mr-2">2</span>
                    åˆ›å»º `.env` æ–‡ä»¶
                  </h4>
                  <p class="text-gray-600 mt-2">åˆ›å»ºä¸€ä¸ªåä¸º .env çš„æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
                  <pre class="code-block">JWT_SECRET_KEY=your_secure_jwt_secret_here
JWT_ACCESS_TOKEN_EXPIRES=3600  # æœ‰æ•ˆæœŸï¼ˆç§’ï¼‰</pre>
                </div>
                
                <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-accent">
                  <h4 class="font-medium flex items-center">
                    <span class="bg-accent text-white rounded-full w-6 h-6 flex items-center justify-center mr-2">3</span>
                    ä¿®æ”¹ app.py
                  </h4>
                  <p class="text-gray-600 mt-2">ä¿®æ”¹ app.py æ–‡ä»¶ï¼Œæ·»åŠ  JWT è®¤è¯åŠŸèƒ½ï¼š</p>
                  <pre class="code-block">from flask import Flask, jsonify, request
from flask_sqlalchemy import SQLAlchemy
from flask_jwt_extended import (
    JWTManager, create_access_token, jwt_required, get_jwt_identity,
    set_access_cookies, unset_jwt_cookies, create_refresh_token,
    get_jwt
)
import os
from dotenv import load_dotenv
from datetime import timedelta

load_dotenv()  # åŠ è½½ç¯å¢ƒå˜é‡
app = Flask(__name__)
app.config['JWT_SECRET_KEY'] = os.getenv('JWT_SECRET_KEY')
app.config['JWT_ACCESS_TOKEN_EXPIRES'] = timedelta(seconds=int(os.getenv('JWT_ACCESS_TOKEN_EXPIRES', 3600)))
app.config['JWT_TOKEN_LOCATION'] = ['cookies', 'headers']  # æ”¯æŒ Cookie å’Œ Header æºå¸¦ä»¤ç‰Œ
app.config['JWT_COOKIE_SECURE'] = True  # ç”Ÿäº§ç¯å¢ƒè®¾ä¸º Trueï¼ˆHTTPS ä¸“ç”¨ï¼‰
jwt = JWTManager(app)

# ç¤ºä¾‹ç”¨æˆ·æ¨¡å‹ï¼ˆå®é™…éœ€ä»æ•°æ®åº“æŸ¥è¯¢ï¼‰
USERS = {
    "agent_user": "agent_pass",
    "admin": "super_secret"
}

@app.route('/login', methods=['POST'])
def login():
    username = request.json.get('username')
    password = request.json.get('password')
    if username in USERS and USERS[username] == password:
        access_token = create_access_token(identity=username)
        refresh_token = create_refresh_token(identity=username)
        response = jsonify({"message": "ç™»å½•æˆåŠŸ"})
        set_access_cookies(response, access_token)
        set_access_cookies(response, refresh_token)
        return response, 200
    return jsonify({"error": "è®¤è¯å¤±è´¥"}), 401

@app.route('/protected_data', methods=['GET'])
@jwt_required()
def protected_data():
    user = get_jwt_identity()
    return jsonify({"user": user, "message": "è¿™æ˜¯å—ä¿æŠ¤çš„èµ„æº"}), 200

@app.route('/logout', methods=['POST'])
def logout():
    response = jsonify({"message": "æ³¨é”€æˆåŠŸ"})
    unset_jwt_cookies(response)
    return response, 200</pre>
                </div>
              </div>
            </div>
          </div>
          
          <div class="mt-8 flex justify-between items-center">
            <div class="text-sm text-gray-500">
              <i class="fa-solid fa-clock text-primary mr-1"></i> é¢„è®¡å®Œæˆæ—¶é—´: 30 åˆ†é’Ÿ
            </div>
            <div class="flex space-x-2">
              <span class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs">å®‰å…¨</span>
              <span class="px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-xs">JWT</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- å®éªŒä¹ -->
    <section id="lab9" class="mb-20 scroll-mt-20">
      <div class="lab-card">
        <div class="lab-header bg-primary/10 border-primary">
          <div class="w-12 h-12 rounded-full bg-primary flex items-center justify-center text-white mr-4">
            <i class="fa-solid fa-shipping-fast text-xl"></i>
          </div>
          <div>
            <h2 class="text-2xl font-bold text-gray-900">ğŸ§ª å®éªŒä¹ï¼šDocker é•œåƒåˆ†å±‚æ„å»ºä¸å®‰å…¨æ‰«æ</h2>
          </div>
        </div>
        
        <div class="p-6">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div>
              <h3 class="text-xl font-semibold mb-4 flex items-center">
                <i class="fa-solid fa-target text-primary mr-2"></i> å®éªŒç›®æ ‡
              </h3>
              <ul class="space-y-2">
                <li class="flex items-start">
                  <i class="fa-solid fa-check-circle text-green-500 mt-1 mr-2"></i>
                  <span>é€šè¿‡å¤šé˜¶æ®µæ„å»ºå‡å°é•œåƒä½“ç§¯</span>
                </li>
                <li class="flex items-start">
                  <i class="fa-solid fa-check-circle text-green-500 mt-1 mr-2"></i>
                  <span>ä½¿ç”¨ Clair è¿›è¡Œæ¼æ´æ‰«æ</span>
                </li>
              </ul>
            </div>
            
            <div>
              <h3 class="text-xl font-semibold mb-4 flex items-center">
                <i class="fa-solid fa-list-ol text-primary mr-2"></i> å®éªŒæ­¥éª¤
              </h3>
              <div class="space-y-4">
                <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-accent">
                  <h4 class="font-medium flex items-center">
                    <span class="bg-accent text-white rounded-full w-6 h-6 flex items-center justify-center mr-2">1</span>
                    Dockerfile å¤šé˜¶æ®µæ„å»º
                  </h4>
                  <p class="text-gray-600 mt-2">ä¿®æ”¹ Dockerfile æ–‡ä»¶ï¼Œä½¿ç”¨å¤šé˜¶æ®µæ„å»ºï¼š</p>
                  <pre class="code-block"># æ„å»ºé˜¶æ®µï¼šå®‰è£…ä¾èµ–
FROM python:3.10-slim AS builder
WORKDIR /app
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# æ‰«æé˜¶æ®µï¼šæ¼æ´æ£€æµ‹ï¼ˆå¯é€‰ï¼Œéœ€æå‰å®‰è£… Clairï¼‰
FROM clairtest/clair-scanner:v10
COPY --from=builder /app /app
RUN scan /app --ip=host --output= ClairReport.json

# è¿è¡Œé˜¶æ®µï¼šæœ€ç»ˆé•œåƒ
FROM python:3.10-slim
WORKDIR /app
COPY --from=builder /usr/local/lib/python3.10/site-packages /usr/local/lib/python3.10/site-packages
COPY . .
USER app
CMD ["python", "app.py"]</pre>
                </div>
                
                <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-accent">
                  <h4 class="font-medium flex items-center">
                    <span class="bg-accent text-white rounded-full w-6 h-6 flex items-center justify-center mr-2">2</span>
                    æ„å»ºå¹¶ç”Ÿæˆæ¼æ´æŠ¥å‘Š
                  </h4>
                  <p class="text-gray-600 mt-2">åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ„å»ºé•œåƒå¹¶ç”Ÿæˆæ¼æ´æŠ¥å‘Šï¼š</p>
                  <pre class="code-block">docker build -t flask-demo:v1.0 .
docker run --rm flask-demo:v1.0 cat ClairReport.json</pre>
                </div>
              </div>
            </div>
          </div>
          
          <div class="mt-8 flex justify-between items-center">
            <div class="text-sm text-gray-500">
              <i class="fa-solid fa-clock text-primary mr-1"></i> é¢„è®¡å®Œæˆæ—¶é—´: 30 åˆ†é’Ÿ
            </div>
            <div class="flex space-x-2">
              <span class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs">å®‰å…¨</span>
              <span class="px-3 py-1 bg-red-100 text-red-800 rounded-full text-xs">Docker</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å»ºè®® -->
    <section id="production" class="mb-20 scroll-mt-20">
      <div class="lab-card">
        <div class="lab-header bg-secondary/10 border-secondary">
          <div class="w-12 h-12 rounded-full bg-secondary flex items-center justify-center text-white mr-4">
            <i class="fa-solid fa-rocket text-xl"></i>
          </div>
          <div>
            <h2 class="text-2xl font-bold text-gray-900">ğŸš€ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å»ºè®®</h2>
          </div>
        </div>
        
        <div class="p-6">
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div class="bg-gray-50 p-5 rounded-lg border border-gray-200">
              <h3 class="font-semibold text-lg mb-3 flex items-center">
                <i class="fa-solid fa-server text-secondary mr-2"></i> ä½¿ç”¨ Gunicorn + Nginx ç»„åˆ
              </h3>
              <pre class="code-block"># å®‰è£… Gunicorn
pip install gunicorn

# Gunicorn é…ç½®æ–‡ä»¶ï¼ˆgunicorn.conf.pyï¼‰
workers = 4
bind = "0.0.0.0:5000"
worker_class = "uvicorn.workers.UvicornWorker"  # å¯é€‰ï¼šä½¿ç”¨ Uvicorn å¼‚æ­¥ worker
accesslog = "-"
errorlog = "-"</pre>
              <pre class="code-block"># Dockerfileï¼ˆç”Ÿäº§ç‰ˆï¼‰
FROM python:3.10-slim
WORKDIR /app
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt
COPY . .
COPY gunicorn.conf.py .
USER app
CMD ["gunicorn", "-c", "gunicorn.conf.py", "app:app"]</pre>
            </div>
            
            <div class="bg-gray-50 p-5 rounded-lg border border-gray-200">
              <h3 class="font-semibold text-lg mb-3 flex items-center">
                <i class="fa-solid fa-lock text-secondary mr-2"></i> HTTPS é…ç½®ä¸ Let's Encrypt
              </h3>
              <pre class="code-block">server {
    listen 443 ssl;
    server_name your-domain.com;
    ssl_certificate /etc/letsencrypt/live/your-domain.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/your-domain.com/privkey.pem;
    include /etc/letsencrypt/options-ssl-nginx.conf;
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;

    location / {
        proxy_pass http://localhost:5000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}</pre>
            </div>
            
            <div class="bg-gray-50 p-5 rounded-lg border border-gray-200">
              <h3 class="font-semibold text-lg mb-3 flex items-center">
                <i class="fa-solid fa-chart-line text-secondary mr-2"></i> å®¹å™¨ç›‘æ§ä¸æ—¥å¿—èšåˆ
              </h3>
              <ul class="list-disc pl-5 space-y-2">
                <li><strong>Prometheus + Grafana</strong>ï¼š</li>
                <ul class="list-disc pl-5 space-y-1">
                  <li>å®‰è£… `flask-prometheus` æ‰©å±•ç›‘æ§æ¥å£æŒ‡æ ‡</li>
                  <li>ä½¿ç”¨ Docker ç›‘æ§æ’ä»¶æ”¶é›†å®¹å™¨èµ„æºæ•°æ®ï¼ˆCPU/å†…å­˜/ç½‘ç»œï¼‰</li>
                </ul>
                <li><strong>ELK Stack</strong>ï¼š</li>
                <ul class="list-disc pl-5 space-y-1">
                  <li>é…ç½® Filebeat æ”¶é›†å®¹å™¨æ—¥å¿—å¹¶å‘é€è‡³ Logstash å¤„ç†</li>
                  <li>åœ¨ Kibana ä¸­åˆ›å»ºä»ªè¡¨ç›˜å±•ç¤ºå®æ—¶æ—¥å¿—å’Œè¶‹åŠ¿åˆ†æ</li>
                </ul>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- é¡µè„š -->
  <footer class="bg-dark text-white py-12">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
        <div>
          <h3 class="text-lg font-semibold mb-4">Python API å®éªŒæŒ‡å—</h3>
          <p class="text-gray-400">é€šè¿‡å®è·µæŒæ¡ä½¿ç”¨ Python è®¿é—®ç¬¬ä¸‰æ–¹ APIã€æ„å»ºæ¥å£æœåŠ¡ã€é›†æˆæ•°æ®åº“ä»¥åŠå®¹å™¨åŒ–éƒ¨ç½²çš„å®Œæ•´æµç¨‹</p>
        </div>
        
        <div>
          <h3 class="text-lg font-semibold mb-4">å®éªŒå¯¼èˆª</h3>
          <ul class="space-y-2">
            <li><a href="#lab1" class="text-gray-400 hover:text-white transition-colors duration-200">å®éªŒä¸€ï¼šä½¿ç”¨ `requests` è®¿é—®ç¬¬ä¸‰æ–¹ API</a></li>
            <li><a href="#lab2" class="text-gray-400 hover:text-white transition-colors duration-200">å®éªŒäºŒï¼šæ„å»º Flask æ¥å£æœåŠ¡</a></li>
            <li><a href="#lab3" class="text-gray-400 hover:text-white transition-colors duration-200">å®éªŒä¸‰ï¼šé›†æˆ Flask + SQLAlchemy + PostgreSQL</a></li>
            <li><a href="#lab4" class="text-gray-400 hover:text-white transition-colors duration-200">å®éªŒå››ï¼šä½¿ç”¨ Docker å®¹å™¨è¿è¡Œ Flask åº”ç”¨</a></li>
          </ul>
        </div>
        
        <div>
          <h3 class="text-lg font-semibold mb-4">æ›´å¤šèµ„æº</h3>
          <ul class="space-y-2">
            <li><a href="#" class="text-gray-400 hover:text-white transition-colors duration-200">å®éªŒä»£ç ä»“åº“</a></li>
            <li><a href="#" class="text-gray-400 hover:text-white transition-colors duration-200">å‚è€ƒæ–‡æ¡£</a></li>
            <li><a href="#" class="text-gray-400 hover:text-white transition-colors duration-200">å¸¸è§é—®é¢˜</a></li>
          </ul>
        </div>
        
        <div>
          <h3 class="text-lg font-semibold mb-4">è”ç³»æˆ‘ä»¬</h3>
          <ul class="space-y-2">
            <li class="flex items-center">
              <i class="fa-solid fa-envelope text-primary mr-2"></i>
              <a href="mailto:support@example.com" class="text-gray-400 hover:text-white transition-colors duration-200">support@example.com</a>
            </li>
            <li class="flex items-center">
              <i class="fa-solid fa-phone text-primary mr-2"></i>
              <a href="tel:+1234567890" class="text-gray-400 hover:text-white transition-colors duration-200">+123 456 7890</a>
            </li>
          </ul>
        </div>
      </div>
      
      <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-500">
        <p>&copy; 2025 Python API å®éªŒæŒ‡å—. ä¿ç•™æ‰€æœ‰æƒåˆ©.</p>
      </div>
    </div>
  </footer>

  <!-- JavaScript -->
  <script>
    // ç§»åŠ¨ç«¯èœå•åˆ‡æ¢
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    
    mobileMenuButton.addEventListener('click', () => {
      mobileMenu.classList.toggle('hidden');
    });
    
    // å¯¼èˆªæ æ»šåŠ¨æ•ˆæœ
    const navbar = document.getElementById('navbar');
    
    window.addEventListener('scroll', () => {
      if (window.scrollY > 50) {
        navbar.classList.add('bg-white/95', 'backdrop-blur-sm');
        navbar.classList.remove('bg-white');
      } else {
        navbar.classList.add('bg-white');
        navbar.classList.remove('bg-white/95', 'backdrop-blur-sm');
      }
    });
    
    // å¹³æ»‘æ»šåŠ¨
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        
        // å…³é—­ç§»åŠ¨ç«¯èœå•
        if (!mobileMenu.classList.contains('hidden')) {
          mobileMenu.classList.add('hidden');
        }
        
        const targetId = this.getAttribute('href');
        const targetElement = document.querySelector(targetId);
        
        if (targetElement) {
          window.scrollTo({
            top: targetElement.offsetTop - 80,
            behavior: 'smooth'
          });
        }
      });
    });
    
    // ä¸ºæ‰€æœ‰ä»£ç å—æ·»åŠ å¤åˆ¶åŠŸèƒ½
    document.querySelectorAll('pre').forEach((pre, index) => {
      const button = document.createElement('button');
      button.className = 'absolute right-4 top-4 bg-gray-800 hover:bg-gray-700 text-white px-2 py-1 rounded text-xs transition-colors duration-200 opacity-0 group-hover:opacity-100';
      button.innerHTML = '<i class="fa-solid fa-copy mr-1"></i> å¤åˆ¶';
      button.addEventListener('click', () => {
        navigator.clipboard.writeText(pre.textContent).then(() => {
          button.innerHTML = '<i class="fa-solid fa-check mr-1"></i> å·²å¤åˆ¶';
          setTimeout(() => {
            button.innerHTML = '<i class="fa-solid fa-copy mr-1"></i> å¤åˆ¶';
          }, 2000);
        });
      });
      
      // ä¸ºä»£ç å—æ·»åŠ ç›¸å¯¹å®šä½ï¼Œä»¥ä¾¿æŒ‰é’®æ­£ç¡®å®šä½
      const parent = pre.parentElement;
      parent.style.position = 'relative';
      parent.style.overflow = 'hidden';
      
      // åªæœ‰å½“ä»£ç å—åœ¨å®éªŒå†…å®¹åŒºåŸŸæ—¶æ‰æ·»åŠ å¤åˆ¶æŒ‰é’®
      if (parent.closest('#lab1') || parent.closest('#lab2') || parent.closest('#lab3') || parent.closest('#lab4') || parent.closest('#lab5') || parent.closest('#lab6') || parent.closest('#lab7') || parent.closest('#lab8') || parent.closest('#lab9') || parent.closest('#production')) {
        parent.appendChild(button);
      }
    });
    
    // æ»šåŠ¨åŠ¨ç”»
    const animateOnScroll = () => {
      const elements = document.querySelectorAll('.lab-card');
      
      elements.forEach(element => {
        const elementPosition = element.getBoundingClientRect().top;
        const windowHeight = window.innerHeight;
        
        if (elementPosition < windowHeight - 100) {
          element.classList.add('animate-fade-in');
        }
      });
    };
    
    // åˆå§‹åŠ è½½æ—¶æ‰§è¡Œä¸€æ¬¡
    animateOnScroll();
    
    // æ»šåŠ¨æ—¶æ‰§è¡Œ
    window.addEventListener('scroll', animateOnScroll);
  </script>
</body>
</html>
    